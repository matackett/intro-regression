<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Chapter 9 Data Wrangling &amp; Multiple Linear Regression | Intro to Regression Analysis</title>
  <meta name="description" content="This document contains lab assignments and other materials for an intermediate-level regression course.">
  <meta name="generator" content="bookdown  and GitBook 2.6.7">

  <meta property="og:title" content="Chapter 9 Data Wrangling &amp; Multiple Linear Regression | Intro to Regression Analysis" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://www.introregression.org/" />
  
  <meta property="og:description" content="This document contains lab assignments and other materials for an intermediate-level regression course." />
  <meta name="github-repo" content="matackett/intro-regression" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 9 Data Wrangling &amp; Multiple Linear Regression | Intro to Regression Analysis" />
  
  <meta name="twitter:description" content="This document contains lab assignments and other materials for an intermediate-level regression course." />
  

<meta name="author" content="Maria Tackett">


<meta name="date" content="2019-05-13">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="8-mlr.html">
<link rel="next" href="10-selection.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Materials for an Intro Regression Course</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a></li>
<li class="part"><span><b>I Assignments</b></span></li>
<li class="chapter" data-level="2" data-path="2-intro.html"><a href="2-intro.html"><i class="fa fa-check"></i><b>2</b> Introduction</a></li>
<li class="chapter" data-level="3" data-path="3-getstarted.html"><a href="3-getstarted.html"><i class="fa fa-check"></i><b>3</b> Getting Started</a></li>
<li class="chapter" data-level="4" data-path="4-test-child.html"><a href="4-test-child.html"><i class="fa fa-check"></i><b>4</b> Test Child</a></li>
<li class="chapter" data-level="5" data-path="5-intro-to-r.html"><a href="5-intro-to-r.html"><i class="fa fa-check"></i><b>5</b> Intro to R</a><ul>
<li class="chapter" data-level="5.1" data-path="5-intro-to-r.html"><a href="5-intro-to-r.html#introduction-1"><i class="fa fa-check"></i><b>5.1</b> Introduction</a><ul>
<li class="chapter" data-level="5.1.1" data-path="5-intro-to-r.html"><a href="5-intro-to-r.html#topics-covered-in-this-lab"><i class="fa fa-check"></i><b>5.1.1</b> Topics covered in this lab:</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="5-intro-to-r.html"><a href="5-intro-to-r.html#packages"><i class="fa fa-check"></i><b>5.2</b> Packages</a></li>
<li class="chapter" data-level="5.3" data-path="5-intro-to-r.html"><a href="5-intro-to-r.html#warm-up"><i class="fa fa-check"></i><b>5.3</b> Warm up</a></li>
<li class="chapter" data-level="5.4" data-path="5-intro-to-r.html"><a href="5-intro-to-r.html#project-name"><i class="fa fa-check"></i><b>5.4</b> Project name:</a><ul>
<li class="chapter" data-level="5.4.1" data-path="5-intro-to-r.html"><a href="5-intro-to-r.html#yaml"><i class="fa fa-check"></i><b>5.4.1</b> YAML:</a></li>
<li class="chapter" data-level="5.4.2" data-path="5-intro-to-r.html"><a href="5-intro-to-r.html#commiting-changes"><i class="fa fa-check"></i><b>5.4.2</b> Commiting changes:</a></li>
<li class="chapter" data-level="5.4.3" data-path="5-intro-to-r.html"><a href="5-intro-to-r.html#pushing-changes"><i class="fa fa-check"></i><b>5.4.3</b> Pushing changes:</a></li>
<li class="chapter" data-level="5.4.4" data-path="5-intro-to-r.html"><a href="5-intro-to-r.html#data"><i class="fa fa-check"></i><b>5.4.4</b> Data</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="5-intro-to-r.html"><a href="5-intro-to-r.html#exercises"><i class="fa fa-check"></i><b>5.5</b> Exercises</a><ul>
<li class="chapter" data-level="5.5.1" data-path="5-intro-to-r.html"><a href="5-intro-to-r.html#visualizing-your-data"><i class="fa fa-check"></i><b>5.5.1</b> Visualizing Your Data</a></li>
</ul></li>
<li class="chapter" data-level="5.6" data-path="5-intro-to-r.html"><a href="5-intro-to-r.html#simple-linear-regression"><i class="fa fa-check"></i><b>5.6</b> Simple Linear Regression</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="6-slr.html"><a href="6-slr.html"><i class="fa fa-check"></i><b>6</b> Simple Linear Regression</a><ul>
<li class="chapter" data-level="6.0.1" data-path="6-slr.html"><a href="6-slr.html#packages-1"><i class="fa fa-check"></i><b>6.0.1</b> Packages</a></li>
<li class="chapter" data-level="6.0.2" data-path="6-slr.html"><a href="6-slr.html#project-name-1"><i class="fa fa-check"></i><b>6.0.2</b> Project name:</a></li>
<li class="chapter" data-level="6.1" data-path="6-slr.html"><a href="6-slr.html#warm-up-1"><i class="fa fa-check"></i><b>6.1</b> Warm up</a><ul>
<li class="chapter" data-level="6.1.1" data-path="6-slr.html"><a href="6-slr.html#yaml-1"><i class="fa fa-check"></i><b>6.1.1</b> YAML:</a></li>
<li class="chapter" data-level="6.1.2" data-path="6-slr.html"><a href="6-slr.html#commiting-and-pushing-changes"><i class="fa fa-check"></i><b>6.1.2</b> Commiting and pushing changes:</a></li>
<li class="chapter" data-level="6.1.3" data-path="6-slr.html"><a href="6-slr.html#pulling-changes"><i class="fa fa-check"></i><b>6.1.3</b> Pulling changes:</a></li>
<li class="chapter" data-level="6.1.4" data-path="6-slr.html"><a href="6-slr.html#data-1"><i class="fa fa-check"></i><b>6.1.4</b> Data</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="6-slr.html"><a href="6-slr.html#exercises-1"><i class="fa fa-check"></i><b>6.2</b> Exercises</a><ul>
<li class="chapter" data-level="6.2.1" data-path="6-slr.html"><a href="6-slr.html#exploratory-data-analysis"><i class="fa fa-check"></i><b>6.2.1</b> Exploratory Data Analysis</a></li>
<li class="chapter" data-level="6.2.2" data-path="6-slr.html"><a href="6-slr.html#simple-linear-regression-1"><i class="fa fa-check"></i><b>6.2.2</b> Simple Linear Regression</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="7-anova.html"><a href="7-anova.html"><i class="fa fa-check"></i><b>7</b> ANOVA</a><ul>
<li class="chapter" data-level="7.0.1" data-path="7-anova.html"><a href="7-anova.html#packages-2"><i class="fa fa-check"></i><b>7.0.1</b> Packages</a></li>
<li class="chapter" data-level="7.0.2" data-path="7-anova.html"><a href="7-anova.html#data-2"><i class="fa fa-check"></i><b>7.0.2</b> Data</a></li>
<li class="chapter" data-level="7.1" data-path="7-anova.html"><a href="7-anova.html#exercises-2"><i class="fa fa-check"></i><b>7.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="8-mlr.html"><a href="8-mlr.html"><i class="fa fa-check"></i><b>8</b> Multiple Linear Regression</a><ul>
<li class="chapter" data-level="8.0.1" data-path="8-mlr.html"><a href="8-mlr.html#packages-3"><i class="fa fa-check"></i><b>8.0.1</b> Packages</a></li>
<li class="chapter" data-level="8.0.2" data-path="8-mlr.html"><a href="8-mlr.html#data-3"><i class="fa fa-check"></i><b>8.0.2</b> Data</a></li>
<li class="chapter" data-level="8.1" data-path="8-mlr.html"><a href="8-mlr.html#exercises-3"><i class="fa fa-check"></i><b>8.1</b> Exercises</a><ul>
<li class="chapter" data-level="8.1.1" data-path="8-mlr.html"><a href="8-mlr.html#acknowledgement"><i class="fa fa-check"></i><b>8.1.1</b> Acknowledgement</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="9-mlr2.html"><a href="9-mlr2.html"><i class="fa fa-check"></i><b>9</b> Data Wrangling &amp; Multiple Linear Regression</a><ul>
<li class="chapter" data-level="9.0.1" data-path="9-mlr2.html"><a href="9-mlr2.html#packages-4"><i class="fa fa-check"></i><b>9.0.1</b> Packages</a></li>
<li class="chapter" data-level="9.0.2" data-path="9-mlr2.html"><a href="9-mlr2.html#data-4"><i class="fa fa-check"></i><b>9.0.2</b> Data</a></li>
<li class="chapter" data-level="9.1" data-path="9-mlr2.html"><a href="9-mlr2.html#exercises-4"><i class="fa fa-check"></i><b>9.1</b> Exercises</a><ul>
<li class="chapter" data-level="9.1.1" data-path="9-mlr2.html"><a href="9-mlr2.html#data-wrangling"><i class="fa fa-check"></i><b>9.1.1</b> Data wrangling</a></li>
<li class="chapter" data-level="9.1.2" data-path="9-mlr2.html"><a href="9-mlr2.html#regression-analysis"><i class="fa fa-check"></i><b>9.1.2</b> Regression Analysis</a></li>
<li class="chapter" data-level="9.1.3" data-path="9-mlr2.html"><a href="9-mlr2.html#acknowledgement-1"><i class="fa fa-check"></i><b>9.1.3</b> Acknowledgement</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="10-selection.html"><a href="10-selection.html"><i class="fa fa-check"></i><b>10</b> Model Selection</a><ul>
<li class="chapter" data-level="10.0.1" data-path="10-selection.html"><a href="10-selection.html#packages-5"><i class="fa fa-check"></i><b>10.0.1</b> Packages</a></li>
<li class="chapter" data-level="10.0.2" data-path="10-selection.html"><a href="10-selection.html#data-5"><i class="fa fa-check"></i><b>10.0.2</b> Data</a></li>
<li class="chapter" data-level="10.1" data-path="10-selection.html"><a href="10-selection.html#exercises-5"><i class="fa fa-check"></i><b>10.1</b> Exercises</a><ul>
<li class="chapter" data-level="10.1.1" data-path="10-selection.html"><a href="10-selection.html#part-i-1"><i class="fa fa-check"></i><b>10.1.1</b> Part I</a></li>
<li class="chapter" data-level="10.1.2" data-path="10-selection.html"><a href="10-selection.html#part-ii-1"><i class="fa fa-check"></i><b>10.1.2</b> Part II</a></li>
<li class="chapter" data-level="10.1.3" data-path="10-selection.html"><a href="10-selection.html#acknowledgements"><i class="fa fa-check"></i><b>10.1.3</b> Acknowledgements</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="11-logistic.html"><a href="11-logistic.html"><i class="fa fa-check"></i><b>11</b> Logistic Regression</a><ul>
<li class="chapter" data-level="11.0.1" data-path="11-logistic.html"><a href="11-logistic.html#packages-6"><i class="fa fa-check"></i><b>11.0.1</b> Packages</a></li>
<li class="chapter" data-level="11.0.2" data-path="11-logistic.html"><a href="11-logistic.html#data-6"><i class="fa fa-check"></i><b>11.0.2</b> Data</a></li>
<li class="chapter" data-level="11.1" data-path="11-logistic.html"><a href="11-logistic.html#exercises-6"><i class="fa fa-check"></i><b>11.1</b> Exercises</a><ul>
<li class="chapter" data-level="11.1.1" data-path="11-logistic.html"><a href="11-logistic.html#exploratory-data-analysis-1"><i class="fa fa-check"></i><b>11.1.1</b> Exploratory Data Analysis</a></li>
<li class="chapter" data-level="11.1.2" data-path="11-logistic.html"><a href="11-logistic.html#part-ii-logistic-regression-model"><i class="fa fa-check"></i><b>11.1.2</b> Part II: Logistic Regression Model</a></li>
<li class="chapter" data-level="11.1.3" data-path="11-logistic.html"><a href="11-logistic.html#part-iii-model-assessment"><i class="fa fa-check"></i><b>11.1.3</b> Part III: Model Assessment</a></li>
<li class="chapter" data-level="11.1.4" data-path="11-logistic.html"><a href="11-logistic.html#part-iv-prediction"><i class="fa fa-check"></i><b>11.1.4</b> Part IV: Prediction</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="12" data-path="12-multinom-logistic.html"><a href="12-multinom-logistic.html"><i class="fa fa-check"></i><b>12</b> Multinomial Logistic Regression</a><ul>
<li class="chapter" data-level="12.0.1" data-path="12-multinom-logistic.html"><a href="12-multinom-logistic.html#packages-7"><i class="fa fa-check"></i><b>12.0.1</b> Packages</a></li>
<li class="chapter" data-level="12.0.2" data-path="12-multinom-logistic.html"><a href="12-multinom-logistic.html#data-7"><i class="fa fa-check"></i><b>12.0.2</b> Data</a></li>
<li class="chapter" data-level="12.1" data-path="12-multinom-logistic.html"><a href="12-multinom-logistic.html#exercises-7"><i class="fa fa-check"></i><b>12.1</b> Exercises</a><ul>
<li class="chapter" data-level="12.1.1" data-path="12-multinom-logistic.html"><a href="12-multinom-logistic.html#part-i-exploratory-data-analysis"><i class="fa fa-check"></i><b>12.1.1</b> Part I: Exploratory Data Analysis</a></li>
<li class="chapter" data-level="12.1.2" data-path="12-multinom-logistic.html"><a href="12-multinom-logistic.html#part-ii-multinomial-logistic-regression-model"><i class="fa fa-check"></i><b>12.1.2</b> Part II: Multinomial Logistic Regression Model</a></li>
<li class="chapter" data-level="12.1.3" data-path="12-multinom-logistic.html"><a href="12-multinom-logistic.html#part-iii-model-fit"><i class="fa fa-check"></i><b>12.1.3</b> Part III: Model Fit</a></li>
<li class="chapter" data-level="12.1.4" data-path="12-multinom-logistic.html"><a href="12-multinom-logistic.html#part-iv-using-the-model"><i class="fa fa-check"></i><b>12.1.4</b> Part IV: Using the Model</a></li>
<li class="chapter" data-level="12.1.5" data-path="12-multinom-logistic.html"><a href="12-multinom-logistic.html#acknowledgements-1"><i class="fa fa-check"></i><b>12.1.5</b> Acknowledgements</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="13" data-path="13-together.html"><a href="13-together.html"><i class="fa fa-check"></i><b>13</b> Putting It All Together</a><ul>
<li class="chapter" data-level="13.0.1" data-path="13-together.html"><a href="13-together.html#packages-8"><i class="fa fa-check"></i><b>13.0.1</b> Packages</a></li>
<li class="chapter" data-level="13.0.2" data-path="13-together.html"><a href="13-together.html#data-8"><i class="fa fa-check"></i><b>13.0.2</b> Data</a></li>
<li class="chapter" data-level="13.0.3" data-path="13-together.html"><a href="13-together.html#exercises-8"><i class="fa fa-check"></i><b>13.0.3</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="14-test-child-1.html"><a href="14-test-child-1.html"><i class="fa fa-check"></i><b>14</b> Test Child</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Intro to Regression Analysis</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="mlr2" class="section level1">
<h1><span class="header-section-number">Chapter 9</span> Data Wrangling &amp; Multiple Linear Regression</h1>
<p>When doing statistical analyses in practice, there is often a lot of time spent on cleaning and preparing the data. The goal of today’s lab is to practice cleaning messy data, so it can be used in a regression analysis. You will also practice interpreting the results from a regression model that has numeric and categorical predictors and a log-transformed response variable.</p>
<div id="packages-4" class="section level3">
<h3><span class="header-section-number">9.0.1</span> Packages</h3>
<p>We will use the following packages in today’s lab.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(tidyverse)
<span class="kw">library</span>(knitr)
<span class="kw">library</span>(skimr)
<span class="kw">library</span>(broom)</code></pre></div>
</div>
<div id="data-4" class="section level3">
<h3><span class="header-section-number">9.0.2</span> Data</h3>
<p>Today’s data is about Airbnb listings in Asheville, NC. The data was obtained from <a href="http://insideairbnb.com/index.html">http://insideairbnb.com/</a>; it was originally scraped from <a href="https://www.airbnb.com/">airbnb.com</a>.</p>
<p>You can see a visualization of some of the data used in today’s lab at <a href="http://insideairbnb.com/asheville/" class="uri">http://insideairbnb.com/asheville/</a>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">basic_info &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="st">&quot;data/airbnb_basic.csv&quot;</span>)
details &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="st">&quot;data/airbnb_details.csv&quot;</span>)</code></pre></div>
<p>We will use the following variables in this lab:</p>
<ul>
<li><code>price</code>: Cost per night (in U.S. dollars)</li>
<li><code>cleaning_fee</code>: Cleaning fee (in U.S. dollars)</li>
<li><code>property_type</code>: Type of dwelling (House, Apartment, etc.)</li>
<li><code>room_type</code>:
<ul>
<li><em>Entire home/apt</em> (guests have entire place to themselves)</li>
<li><em>Private room</em> (Guests have private room to sleep, all other rooms shared)</li>
<li><em>Shared room</em> (Guests sleep in room shared with others)</li>
</ul></li>
<li><code>number_of_reviews</code>: Total number of reviews for the listing</li>
<li><code>review_scores_rating</code>: Average review score (0 - 100)</li>
</ul>
</div>
<div id="exercises-4" class="section level2">
<h2><span class="header-section-number">9.1</span> Exercises</h2>
<div id="data-wrangling" class="section level3">
<h3><span class="header-section-number">9.1.1</span> Data wrangling</h3>
<ol style="list-style-type: decimal">
<li>We would like to use variables from both the <code>basic_info</code> and <code>details</code> data frames in this analysis. Both dataframes have the variable <code>id</code> that uniquely identifies each Airbnb listing. Because we need data from <code>basic_info</code> and <code>details</code>, we only want to include observations that are in both the <code>basic_info</code> and <code>details</code> datasets. Therefore, we will use an <code>inner_join</code> to combine the two data sets. (Note: Both data frames include a variable called <code>id</code> that uniquely identifies each Airbnb listing. R will use this variable to join the two data frames.)</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># See [Section 13.4 of *R for Data Science*](https://r4ds.had.co.nz/relational-data.html#mutating-joins) for more information about joins.</span></code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">airbnb &lt;-<span class="st"> </span><span class="kw">inner_join</span>(basic_info,details)</code></pre></div>
<p>How many observations are in <code>airbnb</code>? How many variables?</p>
<ol start="2" style="list-style-type: decimal">
<li>Some Airbnb rentals have cleaning fees, and we want to include the cleaning fee when we calculate the total rental cost. Use the code below to see how the data in the column <code>cleaning_fee</code> is currently stored in the <code>airbnb</code> data frame.</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">typeof</span>(airbnb<span class="op">$</span>cleaning_fee)</code></pre></div>
<p>The column <code>cleaning_fee</code> currently contains what type of data? Why do you think the data is stored this way even though <code>cleaning_fee</code> is a quantitative variable?</p>
<ol start="3" style="list-style-type: decimal">
<li>Since <code>cleaning_fee</code> is a quantitative variable, we need to make sure it is stored as numeric data in the dataframe. To do so, we will first use the <code>extract</code> function in <code>tidyr</code> package to create a column of cleaning fees that don’t have the dollar sign. Then, we will use the <code>as.numeric()</code> function to make the extracted data the numeric data type <code>double</code>.</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># See [https://tidyr.tidyverse.org/reference/extract.html) for more information about the `extract` function.</span></code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">airbnb &lt;-<span class="st"> </span>airbnb <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">extract</span>(cleaning_fee, <span class="st">&quot;cleaning_fee&quot;</span>) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">cleaning_fee =</span> <span class="kw">as.numeric</span>(cleaning_fee))</code></pre></div>
<p>Use the <code>typeof</code> function to confirm that <code>cleaning_fee</code> is now stored as a <code>double</code> data type.</p>
<ol start="4" style="list-style-type: decimal">
<li><p>Use the <code>skim</code> function to view a summary of the <code>cleaning_fee</code> data. How many observations have missing values for <code>cleaning_fee</code>? What do you think is the most likely reason for the missing observations of <code>cleaning_fee</code>? In other words, what does a missing value of <code>cleaning_fee</code> indicate?</p></li>
<li><p>Fill in the code below to impute the missing values of <code>cleaning_fee</code> with an appropriate numeric value. Then use the <code>skim</code> function to confirm that there are no longer missing values of <code>cleaning_fee</code>.</p></li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># See [https://dplyr.tidyverse.org/reference/case_when.html](https://dplyr.tidyverse.org/reference/case_when.html) for more information about the `case_when` function.</span></code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">airbnb &lt;-<span class="st"> </span>airbnb <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">cleaning_fee =</span> <span class="kw">case_when</span>(
    <span class="kw">is.na</span>(cleaning_fee) <span class="op">~</span><span class="st"> </span>______, 
    <span class="ot">TRUE</span> <span class="op">~</span><span class="st"> </span>cleaning_fee
  ))</code></pre></div>
<p><em>This is an example of data that is missing not at random, since there is a specific pattern/explanation to the misisng data. We will talk more about dealing with missing data later in the semester.</em></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># See [Section 5.6.3 of *R for Data Science*](https://r4ds.had.co.nz/transform.html#counts) for more information about counting observations.</span></code></pre></div>
<ol start="6" style="list-style-type: decimal">
<li>Next, we look at the variable <code>property_type</code>.
<ul>
<li>Use the <code>count</code> function to determine how many categories are in the variable <code>property</code> and the frequency of each category.</li>
<li>What are the top 4 most common property types? These make up what proportion of the observations?</li>
</ul></li>
<li>Since an overwhelming majority of the observations in the data are one of the top 4 property types, we would like to create a simplified version of the <code>proprety_type</code> variable that has 5 categories: <em>House</em>, <em>Apartment</em>, <em>Guest suite</em>, <em>Bungalow</em>, and <em>Other</em>. Fill in the code below to create <code>prop_type_simp</code>.</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">airbnb &lt;-<span class="st"> </span>airbnb <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">prop_type_simp =</span> <span class="kw">case_when</span>(
    property_type <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;House&quot;</span>,<span class="st">&quot;______&quot;</span>, <span class="st">&quot;______&quot;</span>,<span class="st">&quot;______&quot;</span>) <span class="op">~</span><span class="st"> </span>property_type, 
    <span class="ot">TRUE</span> <span class="op">~</span><span class="st"> &quot;Other&quot;</span>
  ))</code></pre></div>
<p>Use the code below to check that <code>prop_type_simp</code> was correctly made.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">airbnb <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">count</span>(property_type, prop_type_simp) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">arrange</span>(<span class="kw">desc</span>(n))</code></pre></div>
<ol start="8" style="list-style-type: decimal">
<li>Airbnb is most commonly used for travel purposes, i.e. as an alternative to traditional hotels. We only want to include Airbnb listings in our regression analysis that are intended for travel purposes. What are the 5 most common values for the variable <code>minimum_nights</code>? Which value in the top 5 stands out? What is the likely intended purpose for Airbnb listings with this seemingly unusual value for <code>minimum_nights</code>?</li>
</ol>
<p>Filter the <code>airbnb</code> data so that it only includes observations with <code>minimum_nights &lt;= 3</code>. You will use this filtered dataset for the remainder of the lab.</p>
</div>
<div id="regression-analysis" class="section level3">
<h3><span class="header-section-number">9.1.2</span> Regression Analysis</h3>
<ol start="9" style="list-style-type: decimal">
<li><p>For the response variable, will use the cost to stay at an Airbnb location for 3 nights. Create a new variable called <code>price_3_nights</code> that uses <code>price</code> and <code>cleaning_fee</code> to calculate the total cost to stay at the Airbnb property for 3 nights. Be sure to add this variable to your dataframe.</p></li>
<li><p>Use histograms to examine the distributions of <code>price_3_nights</code> and <code>log(price_3_nights)</code>. Based on the histograms, which variable should you use for the regression model? Briefly explain.</p></li>
</ol>
<p>Use this variable as the response for the remainder of the lab.</p>
<ol start="11" style="list-style-type: decimal">
<li><p>Fit a regression model called <code>model1</code> with the response variable from the previous question and the following predictor variables: <code>prop_type_simp</code>, <code>number_of_reviews</code>, and <code>review_scores_rating</code>. Display the model output.</p></li>
<li><p>Interpret the coefficient <code>review_scores_rating</code> in terms of <code>price_3_nights</code>.</p></li>
<li><p>Interpret the coefficient of <code>prop_type_simpGuest suite</code> in terms of <code>price_3_nights</code>.</p></li>
<li><p>We want to determine if <code>room_type</code> is a significant predictor of the cost for 3 nights, given everything else in the model. Fit a regression model called <code>model2</code> that includes all of the predictor variables in <code>model1</code> and <code>room_type</code>. Display the model output.</p></li>
</ol>
<p>Use the code below to conduct a Nested F test to determine if <code>room_type</code> is a significant predictor of the minimum cost. What is your conclusion from the Nested F test?</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">anova</span>(model1, model2)</code></pre></div>
<ol start="15" style="list-style-type: decimal">
<li>Suppose you are planning to visit Asheville over spring break, and you want to stay in an Airbnb. You find an Airbnb that is an apartment with a private room, has 10 reviews, and an average rating of 90. Use <code>model2</code> to predict the total cost to stay at this Airbnb for 3 nights. Include the appropriate 95% interval with your prediction. Report the prediction and interval in terms of <code>price_3_nights</code>.</li>
</ol>
<p><em>You’re done! Commit all remaining changes, use the commit message “Done with Lab 5!”, and push. Before you wrap up the assignment, make sure the .Rmd and .md documents are updated in your GitHub repo. There is a 10% penalty if the .Rmd file has to be knitted to display graphs, i.e. the graphs are not showing in the .md file on GitHub.</em></p>
</div>
<div id="acknowledgement-1" class="section level3">
<h3><span class="header-section-number">9.1.3</span> Acknowledgement</h3>
<p>The data from this lab is from <a href="http://insideairbnb.com/index.html">insideairbnb.com</a></p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="8-mlr.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="10-selection.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"download": ["introregression.pdf"],
"toc": {
"collapse": "section",
"scroll_highlight": true
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(src))
      src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
